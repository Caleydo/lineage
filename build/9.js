webpackJsonp([9,11],{623:function(t,e,r){"use strict";function i(t,e){return e?new v(t,r.i(E.a)(e)):new v(t,r.i(E.b)())}function n(t,e,i){return new v(t,r.i(E.a)(r.i(E.c)(e,i)))}function _(t,e){return t.map(function(t){var r={};return e.forEach(function(e,i){return r[e]=t[i]}),r})}function o(t,e){return t.map(function(t){return e.map(function(e){return t[e]})})}function u(t,e,i,n,_){void 0===_&&(_={});var o=r.i(p.a)(r.i(h.a)(),{columns:t,size:[e.length,t.length]},_),u=_.rowassigner||r.i(d.d)(),a=function(){var t={rowIds:u(e),rows:e,objs:i,data:n};return Promise.resolve(t)};return new v(o,r.i(E.a)(a))}function a(t,e){void 0===e&&(e={});var i=t.map(function(t){return t[0]}),n=t[0].slice(1),o=t.slice(1).map(function(t){return t.slice(1)}),a=n.map(function(t,e){return{name:t,column:t,value:r.i(f.f)(o.map(function(t){return t[e]}))}}),s=o.map(function(t){return a.map(function(e,r){return e.value.type===f.c||e.value.type===f.b?parseFloat(t[r]):t[r]})}),c=_(s,n);return u(a,i,c,s,e)}function s(t,e){void 0===e&&(e={});var i=e.keyProperty||"_id",n=t.map(function(t,e){return String(t[i]||e)}),_=Object.keys(t[0]),a=t,s=o(a,_);return u(_.map(function(t,e){return{name:t,column:t,value:r.i(f.f)(s.map(function(t){return t[e]}))}}),n,a,s,e)}Object.defineProperty(e,"__esModule",{value:!0});var c=r(5),p=r(19),l=r(13),d=r(231),f=r(18),h=r(779),b=r(778),y=r(781),E=r(782);e.create=i,e.wrapObjects=n,e.asTableFromArray=a,e.asTable=s;var v=function(t){function e(e,r){var i=t.call(this,null)||this;return i.desc=e,i.loader=r,e.columns.forEach(function(t){return t.column=t.column||t.name}),i.root=i,i.vectors=e.columns.map(function(t,e){return new y.a(i,e,t)}),i}return c.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return r.i(d.e)(this.desc.idtype||this.desc.rowtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=r.i(l.a)()),r.i(l.h)(t).filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return c.b(this,void 0,void 0,function(){return c.c(this,function(i){switch(i.label){case 0:return[4,this.colData(this.col(e).column,r.i(l.b)(t))];case 1:return[2,i.sent()[0]]}})})},e.prototype.queryView=function(t,i){return new e(this.desc,r.i(E.a)(this.loader.view(this.desc,t,i)))},e.prototype.data=function(t){return void 0===t&&(t=r.i(l.a)()),this.loader.data(this.desc,r.i(l.h)(t))},e.prototype.colData=function(t,e){return void 0===e&&(e=r.i(l.a)()),this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){return void 0===e&&(e=r.i(l.a)()),this.loader.col(this.desc,t,r.i(l.h)(e))},e.prototype.objects=function(t){return void 0===t&&(t=r.i(l.a)()),this.loader.objs(this.desc,r.i(l.h)(t))},e.prototype.rows=function(t){return void 0===t&&(t=r.i(l.a)()),this.loader.rows(this.desc,r.i(l.h)(t))},e.prototype.rowIds=function(t){return void 0===t&&(t=r.i(l.a)()),this.loader.rowIds(this.desc,r.i(l.h)(t))},e.prototype.ids=function(t){return void 0===t&&(t=r.i(l.a)()),this.rowIds(t)},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e}(b.a);e.default=v},660:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(13),__WEBPACK_IMPORTED_MODULE_2__index__=__webpack_require__(19),__WEBPACK_IMPORTED_MODULE_3__idtype__=__webpack_require__(231),__WEBPACK_IMPORTED_MODULE_4__datatype__=__webpack_require__(18),__WEBPACK_IMPORTED_MODULE_5__math__=__webpack_require__(233),__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__=__webpack_require__(690),__WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__=__webpack_require__(689),AVector=function(_super){function AVector(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(AVector,_super),Object.defineProperty(AVector.prototype,"dim",{get:function(){return[this.length]},enumerable:!0,configurable:!0}),Object.defineProperty(AVector.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),AVector.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),new VectorView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t))},AVector.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return e=r.sent(),[2,this.view(e.indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t)))]}})})},AVector.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.b&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.c?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.c,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})},AVector.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.b&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.c?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.d,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})},Object.defineProperty(AVector.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.i)(0,this.length)},enumerable:!0,configurable:!0}),AVector.prototype.groups=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var t,e,r,i,n;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(_){switch(_.label){case 0:return t=this.root.valuetype,t.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.a?[3,2]:(e=t,[4,this.data()]);case 1:return r=_.sent(),i={name:this.root.desc.id},"string"!=typeof e.categories[0]&&(n=e.categories,n[0].color&&(i.colors=n.map(function(t){return t.color})),n[0].label&&(i.labels=n.map(function(t){return t.label}))),[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__datatype__.i)(r,e.categories.map(function(t){return"string"==typeof t?t:t.name}),i)];case 2:return[2,Promise.resolve(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.g)(this.root.desc.id,[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.j)(this.indices.dim(0))]))]}})})},AVector.prototype.stratification=function(){return this.asStratification()},AVector.prototype.asStratification=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var t,e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return t=__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a.bind,e=[void 0,this.root],[4,this.groups()];case 1:return[2,new(t.apply(__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a,e.concat([r.sent()])))]}})})},AVector.prototype.hist=function(t,e){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,i,n,_;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(o){switch(o.label){case 0:return r=this.root.valuetype,[4,this.data(e)];case 1:switch(i=o.sent(),r.type){case __WEBPACK_IMPORTED_MODULE_4__datatype__.a:return n=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.e)(i,this.indices.dim(0),i.length,n.categories.map(function(t){return"string"==typeof t?t:t.name}),n.categories.map(function(t){return"string"==typeof t?t:t.label||t.name}),n.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}))];case __WEBPACK_IMPORTED_MODULE_4__datatype__.c:case __WEBPACK_IMPORTED_MODULE_4__datatype__.b:return _=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.f)(i,this.indices.dim(0),i.length,t||Math.round(Math.sqrt(this.length)),_.range)];default:return[2,null]}return[2]}})})},AVector.prototype.every=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return[2,r.sent().every(t,e)]}})})},AVector.prototype.some=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return[2,r.sent().some(t,e)]}})})},AVector.prototype.forEach=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return r.sent().forEach(t,e),[2]}})})},AVector.prototype.reduce=function(t,e,r){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){function i(){return t.apply(r,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduce(i,e)]}})})},AVector.prototype.reduceRight=function(t,e,r){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){function i(){return t.apply(r,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduceRight(i,e)]}})})},AVector.prototype.reduceAtom=function(t,e,r,i){var n=this;return new __WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__.a(n,t,e,r,i)},AVector.prototype.restore=function(persisted){var r=this;return persisted&&persisted.f?this.reduceAtom(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__idtype__.e)(persisted.idtype):void 0):(persisted&&persisted.range&&(r=r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(persisted.range))),r)},AVector}(__WEBPACK_IMPORTED_MODULE_3__idtype__.a);__webpack_exports__.a=AVector;var VectorView=function(t){function e(e,r){var i=t.call(this,e)||this;return i.range=r,i}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.size=function(){return this.range.size(this.root.dim)[0]},e.prototype.at=function(t){var e=this.range.invert([t],this.root.dim);return this.root.at(e[0])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.names=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.names(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.ids(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.sort=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return r=n.sent(),i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.l)(r,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.b)(i))]}})})},e.prototype.filter=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return r=n.sent(),i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.m)(r,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.b)(i))]}})})},e}(AVector)},682:function(t,e,r){"use strict";var i=r(5),n=r(13),_=r(231),o=r(233),u=function(t){function e(e,r,i){var n=t.call(this)||this;return n.root=e,n.groupIndex=r,n.groupDesc=i,n}return i.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return[this.groupDesc]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return 0===t?this:null},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(n.a)()),i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return t=o.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.all([this.root.asVector(),this.rangeGroup()]).then(function(t){return t[0].view(r.i(n.b)(t[1]))})},e.prototype.origin=function(){return this.root.origin()},e.prototype.range=function(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,this.rangeGroup()];case 1:return t=e.sent(),[2,new n.k(t.name,[t])]}})})},e.prototype.idRange=function(){return i.b(this,void 0,void 0,function(){var t,e;return i.c(this,function(r){switch(r.label){case 0:return[4,this.root.idRange()];case 1:return t=r.sent(),e=t.groups[this.groupIndex],[2,new n.k(e.name,[e])]}})})},e.prototype.rangeGroup=function(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,this.root.range()];case 1:return t=e.sent(),[2,t.groups[this.groupIndex]]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(n.a)()),i.b(this,void 0,void 0,function(){var e,_;return i.c(this,function(i){switch(i.label){case 0:return[4,this.rangeGroup()];case 1:return e=i.sent(),_=r.i(n.b)(e).preMultiply(r.i(n.h)(t)),[2,this.root.names(_)]}})})},e.prototype.ids=function(t){return void 0===t&&(t=r.i(n.a)()),i.b(this,void 0,void 0,function(){var e,_;return i.c(this,function(i){switch(i.label){case 0:return[4,this.rangeGroup()];case 1:return e=i.sent(),_=r.i(n.b)(e).preMultiply(r.i(n.h)(t)),[2,this.root.ids(_)]}})})},e.prototype.idView=function(t){return void 0===t&&(t=r.i(n.a)()),Promise.reject("not implemented")},e.prototype.toString=function(){return this.persist()},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return[this.length]},Object.defineProperty(e.prototype,"length",{get:function(){return this.groupDesc.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),group:this.groupIndex}},e.prototype.restore=function(t){return this},e}(_.a);e.a=u},689:function(t,e,r){"use strict";var i=r(5),n=r(13),_=r(231),o=function(t){function e(e,r,i,n,_){void 0===i&&(i=e),void 0===n&&(n=e.valuetype),void 0===_&&(_=e.idtype);var o=t.call(this)||this;return o.v=e,o.f=r,o.thisArgument=i,o.valuetype=n,o._idtype=_,o.cache=null,o.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"atom",id:e.desc.id+"-p",idtype:e.idtype,value:o.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},o}return i.a(e,t),e.prototype.load=function(){var t=this;return null===this.cache&&(this.cache=Promise.all([this.v.data(),this.v.ids(),this.v.names()]).then(function(e){return t.f.apply(t.thisArgument,e)})),this.cache},e.prototype.id=function(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,r.i(n.b)(t.id)]}})})},e.prototype.name=function(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.name]}})})},e.prototype.data=function(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.value]}})})},Object.defineProperty(e.prototype,"dim",{get:function(){return[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(n.a)()),t=r.i(n.h)(t),t.isNone?Promise.resolve(r.i(n.d)()):this.id()},e.prototype.idView=function(t){return Promise.resolve(this)},e.prototype.persist=function(){return{root:this.v.persist(),f:this.f.toString(),valuetype:this.valuetype===this.v.valuetype?void 0:this.valuetype,idtype:this.idtype===this.v.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){return this},e}(_.a);e.a=o},690:function(t,e,r){"use strict";var i=r(5),n=r(13),_=r(18),o=r(233),u=r(682),a=function(t){function e(e,r){var i=t.call(this,{id:e.desc.id+"-s",name:e.desc.name,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts,fqname:e.desc.fqname,type:"stratification",idtype:e.idtype.id,size:e.length,ngroups:r.groups.length,groups:r.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}})})||this;return i.v=e,i.r=r,i}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.v.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new u.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(n.a)()),i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return t=o.b,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.resolve(this.v)},e.prototype.origin=function(){return this.asVector()},e.prototype.range=function(){return Promise.resolve(this.r)},e.prototype.idRange=function(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return t=e.sent(),[2,t.dim(0).preMultiply(this.r,this.dim[0])]}})})},e.prototype.names=function(t){return void 0===t&&(t=r.i(n.a)()),this.v.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(n.a)()),this.v.ids(t)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.size()]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.v.persist(),asstrat:!0}},e}(_.h);e.a=a},778:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(13),__WEBPACK_IMPORTED_MODULE_2__idtype__=__webpack_require__(231),__WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__=__webpack_require__(780),ATable=function(_super){function ATable(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(ATable,_super),Object.defineProperty(ATable.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),ATable.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),new TableView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t))},ATable.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return e=this.view,[4,this.ids()];case 1:return[2,e.apply(this,[r.sent().indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t))])]}})})},ATable.prototype.reduce=function(t,e,r,i){return new __WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__.a(this.root,t,e,r,i)},ATable.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__idtype__.e)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(persisted.range)):this},ATable}(__WEBPACK_IMPORTED_MODULE_2__idtype__.a);__webpack_exports__.a=ATable;var TableView=function(t){function e(e,r){var i=t.call(this,e)||this;return i.range=r,i.range=r,i.vectors=i.root.cols(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.b)(r.dim(1))).map(function(t){return t.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.b)(r.dim(0)))}),i}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t.range))),e},e.prototype.size=function(){return this.range.size(this.root.dim)},e.prototype.at=function(t,e){var r=this.range.invert([t,e],this.root.dim);return this.root.at(r[0],r[1])},e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t).filter(this.vectors,[this.ncol])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.colData=function(t,e){return this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)());var r=this.range.dim(0).preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(e).dim(0),this.root.dim[0]);return this.root.dataOfColumn(t,new __WEBPACK_IMPORTED_MODULE_1__range__.l([r]))},e.prototype.objects=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.objects(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.rows(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.root.rowIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)()),this.rowIds(t)},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.a)());var r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.h)(t);return r.isAll?this:new e(this.root,this.range.preMultiply(r,this.dim))},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.queryView=function(t,e){throw new Error("not implemented")},e}(ATable)},779:function(t,e,r){"use strict";function i(){return r.i(n.a)(r.i(_.g)(),{type:"table",idtype:"_rows",columns:[],size:[0,0]})}var n=r(19),_=r(18);e.a=i},780:function(t,e,r){"use strict";var i=r(5),n=r(19),_=r(13),o=r(660),u=function(t){function e(e,i,_,o,u){void 0===_&&(_=e),void 0===o&&(o=null),void 0===u&&(u=e.idtype);var a=t.call(this,null)||this;return a.table=e,a.f=i,a.thisArgument=_,a.valuetype=o,a._idtype=u,a.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",description:i.toString(),type:"vector",id:r.i(n.h)(e.desc.id+"-p"+i.toString()),idtype:e.desc.idtype,size:e.nrow,value:o,creator:e.desc.creator,ts:Date.now()},a.root=a,a}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),f:this.f.toString(),valuetype:this.valuetype?this.valuetype:void 0,idtype:this.idtype===this.table.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(_.h)(t.range))),e},e.prototype.size=function(){return this.table.nrow},e.prototype.names=function(t){return this.table.rows(t)},e.prototype.ids=function(t){return this.table.rowIds(t)},e.prototype.at=function(t){return i.b(this,void 0,void 0,function(){var e,n,o;return i.c(this,function(i){switch(i.label){case 0:return n=(e=this.f).call,o=[this.thisArgument],[4,this.table.data(r.i(_.b)(t))];case 1:return[2,n.apply(e,o.concat([i.sent()[0]]))]}})})},e.prototype.data=function(t){return i.b(this,void 0,void 0,function(){return i.c(this,function(e){switch(e.label){case 0:return[4,this.table.data(t)];case 1:return[2,e.sent().map(this.f,this.thisArgument)]}})})},e.prototype.sort=function(t,e){return i.b(this,void 0,void 0,function(){var o,u;return i.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return o=i.sent(),u=r.i(n.l)(o,t,e),[2,this.view(r.i(_.b)(u))]}})})},e.prototype.filter=function(t,e){return i.b(this,void 0,void 0,function(){var o,u;return i.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return o=i.sent(),u=r.i(n.m)(o,t,e),[2,this.view(r.i(_.b)(u))]}})})},e}(o.a);e.a=u},781:function(t,e,r){"use strict";var i=r(5),n=r(19),_=r(13),o=r(660),u=function(t){function e(e,r,i){var n=t.call(this,null)||this;return n.table=e,n.index=r,n.column=i.column,n.root=n,n.desc={type:"vector",id:e.desc.id+"_"+i.name,name:i.name,description:i.description||"",fqname:e.desc.fqname+"/"+i.name,idtype:e.idtype.id,size:e.nrow,value:i.value,creator:e.desc.creator,ts:e.desc.ts},n}return i.a(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.table.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),col:this.index}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(_.h)(t.range))),e},e.prototype.at=function(t){return this.table.at(t,this.index)},e.prototype.data=function(t){return void 0===t&&(t=r.i(_.a)()),this.table.colData(this.column,t)},e.prototype.names=function(t){return void 0===t&&(t=r.i(_.a)()),this.table.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(_.a)()),this.table.rowIds(t)},e.prototype.size=function(){return this.table.nrow},e.prototype.sort=function(t,e){return i.b(this,void 0,void 0,function(){var o,u;return i.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return o=i.sent(),u=r.i(n.l)(o,t,e),[2,this.view(r.i(_.b)(u))]}})})},e.prototype.filter=function(t,e){return i.b(this,void 0,void 0,function(){var o,u;return i.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return o=i.sent(),u=r.i(n.m)(o,t,e),[2,this.view(r.i(_.b)(u))]}})})},e}(o.a);e.a=u},782:function(t,e,r){"use strict";function i(t,e,r){if(e.isAll)return t;if(t=e.dim(0).filter(t,r.size[0]),e.ndim>1&&!e.dim(1).isAll){var i=e.dim(1).filter(r.columns,r.columns.length),n=i.map(function(t){return t.column||t.name});return t.map(function(t){var e={};return n.forEach(function(r){return e[r]=t[r]}),e})}return t}function n(t){return{rowIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.rowIds,e.size)})},rows:function(e,r){return t(e).then(function(t){return r.dim(0).filter(t.rows,e.size[0])})},col:function(e,r,i){return t(e).then(function(t){return i.filter(t.objs.map(function(t){return t[r]}),e.size)})},objs:function(e,r){return t(e).then(function(t){return i(t.objs,r,e)})},data:function(e,r){return t(e).then(function(t){return r.filter(s(t.objs,e.columns),e.size)})},view:function(t,e,r){throw new Error("not implemented")}}}function _(t,e){var i=void 0;return function(n){return i||(i=r.i(p.a)("/dataset/table/"+n.id+"/view/"+t,e).then(function(t){return t.rowIds=r.i(l.h)(t.rowIds),t.objs=u(t.data,n),t})),i}}function o(t,e){return!e.value||e.value.type!==d.b&&e.value.type!==d.c?t:r.i(d.j)(t,e.value)}function u(t,e){var i=e.columns.filter(function(t){return t.value&&(t.value.type===d.b||t.value.type===d.c)});return i.length>0&&t.forEach(function(t){i.forEach(function(e){return t[e.name]=r.i(d.j)(t[e.name],e.value)})}),t}function a(){function t(t){null!==n&&null!==a&&Promise.all([n,a]).then(function(e){var i=e[0],n=e[1],_=r.i(f.e)(t.idtype),o=r.i(l.h)(i);_.fillMapCache(o.dim(0).asList(n.length),n)})}var e={},n=null,a=null,c=null,d=null,h={rowIds:function(e,i){return null==n&&(n=r.i(p.a)("/dataset/table/"+e.id+"/rowIds").then(l.h),t(e)),n.then(function(t){return t.preMultiply(i,e.size)})},rows:function(e,i){return null==a&&(a=r.i(p.a)("/dataset/table/"+e.id+"/rows"),t(e)),a.then(function(t){return i.dim(0).filter(t,e.size[0])})},objs:function(t,e){return null==c&&(e.isAll||t.loadAtOnce)&&(c=r.i(p.a)("/dataset/table/"+t.id+"/raw").then(function(e){return u(e,t)})),e.isAll?c:null!=c?c.then(function(r){return e.filter(r,t.size)}):r.i(p.c)("/dataset/table/"+t.id+"/raw",{range:e.toString()}).then(function(e){return u(e,t)})},data:function(t,e){return null==d&&(e.isAll||t.loadAtOnce)&&(d=h.objs(t,r.i(l.a)()).then(function(e){return s(e,t.columns)})),e.isAll?d:null!=d?d.then(function(r){return e.filter(r,t.size)}):h.objs(t,e).then(function(e){return s(e,t.columns)})},col:function(t,n,_){var a=t.columns.find(function(t){return t.column===n||t.name===n});return null==e[n]&&(_.isAll||t.loadAtOnce)&&(null===c?t.loadAtOnce?(c=r.i(p.a)("/dataset/table/"+t.id+"/raw").then(function(e){return u(e,t)}),e[n]=c.then(function(t){return t.map(function(t){return t[n]})})):e[n]=r.i(p.a)("/dataset/table/"+t.id+"/col/"+n).then(function(t){return o(t,a)}):e[n]=c.then(function(t){return t.map(function(t){return t[n]})})),_.isAll?e[n]:null!=e[n]?e[n].then(function(e){return i(e,_,t)}):r.i(p.c)("/dataset/table/"+t.id+"/col/"+n,{range:_.toString()}).then(function(t){return o(t,a)})},view:function(t,e,r){return _(e,r)}};return h}function s(t,e){return t.map(function(t){return e.map(function(e){return t[e.column]})})}function c(t,e){var i=void 0;return function(n){function _(t){return t.getter?t.getter:function(e){return e[t.column]}}if(i)return Promise.resolve(i);var o="function"==typeof e?e:function(t){return t[e.toString()]},u=n.columns.map(_),a=t.map(function(t){var e={_:t};return n.columns.forEach(function(r,i){e[r.column]=u[i](t)}),e}),s=t.map(o);return i={rowIds:n.rowassigner?n.rowassigner.map(s):r.i(l.i)(0,t.length),rows:s,objs:a,data:u.map(function(e){return t.map(e)})},Promise.resolve(i)}}var p=r(71),l=r(13),d=r(18),f=r(231);e.a=n,e.b=a,e.c=c}});